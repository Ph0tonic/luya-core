!function(a){a.fn.lazyLoad=function(b){var c=[],d=a.extend({defaultAspectRatio:1.777777778,threshold:200,loaderHtml:'<div class="loader"></div>',imageIdentifierPrefix:"lazy-image-"},b),e=!1,f=!1;this.each(function(b){var e=a(this).attr("data-width");imageHeight=a(this).attr("data-height"),imageAspectRatio=d.defaultAspectRatio,e&&imageHeight&&(imageAspectRatio=imageHeight/e),c.push({id:b,class:a(this).attr("class"),width:e,height:imageHeight,aspectRatio:imageAspectRatio,sources:{default:a(this).attr("data-src")}});var f=a("<div/>",{class:"lazyload-placeholder "+a(this).attr("class"),id:d.imageIdentifierPrefix+b}).css({position:"relative"}).append(a("<div/>").css({height:0,"padding-bottom":100*imageAspectRatio+"%"})).append(a(d.loaderHtml).css({position:"absolute",top:0}));a(this).replaceWith(f)});var g=function(){return a.grep(c,function(b){if("undefined"==typeof b)return!1;var c=a("#"+d.imageIdentifierPrefix+b.id);if(c.length<=0)return!1;var e=a(window).scrollTop()-200-d.threshold,f=e+a(window).height()+200+d.threshold,g=c.offset().top,h=g+c.outerHeight();return g>=e&&g<=f||g<=e&&h<=f&&h>=e})},h=function(){var b=g();a(b).each(function(){var b=a("<img/>",{src:this.sources.default,class:this.class}),e=this;b.on("load",function(){delete c[e.id],a("#"+d.imageIdentifierPrefix+e.id).replaceWith(b)})})};h(),setInterval(function(){1!=e&&1!=f||(h(),scrolled=!1)},250),a(document).on("touchmove",function(){f=!0}),a(window).on("scroll resize",function(){e=!0,f=!1})}}(jQuery);